<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ç¡çœ ç®¡ç†ã‚¢ãƒ—ãƒª</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body{
      font-family:"Hiragino Kaku Gothic ProN",sans-serif;
      background:#fff8e7;
      padding:22px;
      text-align:center;
    }

    h1{
      background:#f7a400;
      color:#fff;
      padding:18px;
      border-radius:14px;
      margin-bottom:24px;
      font-size:26px;
      font-weight:600;
      display:inline-block;
      width:80%;
      max-width:360px;
    }

    .score-box{
      background:#fff;
      border-radius:16px;
      padding:20px;
      margin:0 auto 30px;
      width:80%;
      max-width:360px;
      border:3px solid #f7a400;
    }

    .score-title{
      font-size:16px;
      color:#666;
    }

    .score{
      font-size:42px;
      font-weight:700;
      color:#f7a400;
      margin:10px 0;
    }

    .score-msg{
      font-size:14px;
      color:#555;
    }

    .menu a{
      display:block;
      padding:16px;
      margin:18px auto;
      background:#fff;
      border-radius:14px;
      text-decoration:none;
      color:#333;
      font-size:20px;
      width:80%;
      max-width:360px;
      border:3px solid #f7a400;
      font-weight:500;
    }

    .note{
      margin-top:30px;
      color:#777; 
      font-size:14px;
    }
  </style>
</head>
<body>

  <h1>ç¡çœ ç®¡ç†ã‚¢ãƒ—ãƒª</h1>

  <!-- â˜… æœ€æ–°ã‚¹ã‚³ã‚¢è¡¨ç¤º -->
  <div class="score-box">
    <div class="score-title">æœ€æ–°ã®ç¡çœ ã‚¹ã‚³ã‚¢</div>
    <div class="score" id="latestScore">ãƒ¼</div>
    <div class="score-msg" id="scoreMsg">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</div>
  </div>

  <div class="menu">
    <a href="record.html">ğŸŒ™ç¡çœ ã‚’è¨˜éŒ²ã™ã‚‹</a>
    <a href="history.html">ğŸ“å±¥æ­´ã‚’è¦‹ã‚‹</a>
    <a href="graph.html">ğŸ“Šç¡çœ ã‚°ãƒ©ãƒ•</a>
  </div>

  <p class="note">ãƒ‡ãƒ¼ã‚¿ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã«ä¿å­˜ã•ã‚Œã¾ã™</p>

<script>
  const data = JSON.parse(localStorage.getItem("sleepData") || "[]");

  function calcScore(hours){
    if (hours >= 6 && hours <= 8) return 100;
    if (hours >= 5 && hours < 6) return 80;
    if (hours > 8 && hours <= 9) return 80;
    if (hours >= 4 && hours < 5) return 60;
    if (hours > 9 && hours <= 10) return 60;
    return 40;
  }

  if (data.length > 0) {
    const latest = data[data.length - 1];
    const hours = Number(latest.duration);

    if (!isNaN(hours)) {
      const score = calcScore(hours);
      document.getElementById("latestScore").textContent = score + " ç‚¹";

      let msg = "";
      if (score === 100) msg = "ã¨ã¦ã‚‚è‰¯ã„ç¡çœ ã§ã™ ğŸ‘";
      else if (score >= 80) msg = "ã¾ãšã¾ãšã®ç¡çœ ã§ã™";
      else if (score >= 60) msg = "å°‘ã—æ”¹å–„ã®ä½™åœ°ãŒã‚ã‚Šã¾ã™";
      else msg = "ç¡çœ æ™‚é–“ã‚’è¦‹ç›´ã—ã¦ã¿ã¾ã—ã‚‡ã†";

      document.getElementById("scoreMsg").textContent = msg;
    }
  }
</script>

</body>
</html>
